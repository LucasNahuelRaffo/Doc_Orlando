{"version":3,"file":"static/js/970.e6466815.chunk.js","mappings":"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","sources":["components/ConsultationAI.jsx"],"sourcesContent":["// src/components/ConsultationAI.jsx\r\nimport React, { useState, useRef } from \"react\";\r\n\r\n/**\r\n * Página Consulta IA mejorada:\r\n * - \"Limpiar\" borra textarea, limpia preview y devuelve el foco.\r\n * - Integración preparada para llamar a un endpoint backend (/api/ai/resume).\r\n */\r\n\r\nexport default function ConsultationAI() {\r\n  const [notes, setNotes] = useState(\"\");\r\n  const [history, setHistory] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [summary, setSummary] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const textareaRef = useRef(null);\r\n\r\n  // Limpiar: borra notas y preview, devuelve foco\r\n  function handleClear() {\r\n    setNotes(\"\");\r\n    setSummary(null);\r\n    setError(null);\r\n    // devolver foco al textarea (mejora UX)\r\n    if (textareaRef.current) textareaRef.current.focus();\r\n  }\r\n\r\n  // Generar resumen: si tienes backend, lo llamas en POST a /api/ai/resume\r\n  async function handleGenerate(e) {\r\n    e.preventDefault();\r\n    setError(null);\r\n\r\n    const text = (notes || \"\").trim();\r\n    if (!text) {\r\n      setError(\"Por favor ingrese notas para generar un resumen.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setSummary(null);\r\n\r\n    try {\r\n      // Llamada al backend que debe hacer la petición a la IA (explicado más abajo)\r\n      const res = await fetch(\"/api/ai/resume\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ notes: text }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errText = await res.text();\r\n        throw new Error(errText || \"Error en el servidor\");\r\n      }\r\n\r\n      const data = await res.json();\r\n      const aiSummary = data.summary || data.result || \"No se obtuvo respuesta.\";\r\n\r\n      // guardar en historial\r\n      const entry = {\r\n        id: Date.now(),\r\n        text,\r\n        summary: aiSummary,\r\n        createdAt: new Date().toLocaleString(),\r\n      };\r\n      setHistory((s) => [entry, ...s]);\r\n      setSummary(aiSummary);\r\n      setNotes(\"\"); // opcional: limpiar notas tras generar\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"No se pudo generar el resumen. Intenta más tarde.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className=\"section\" style={{ paddingTop: \"3.5rem\", paddingBottom: \"4rem\" }}>\r\n      <div className=\"container\" style={{ maxWidth: 1100 }}>\r\n        <header style={{ textAlign: \"center\", marginBottom: \"1.25rem\" }}>\r\n          <h1 className=\"h2\" style={{ fontSize: \"clamp(2rem, 4.5vw, 3.25rem)\" }}>\r\n            Consulta Virtual con IA\r\n          </h1>\r\n          <p className=\"lead\" style={{ maxWidth: 820, margin: \"12px auto 0\" }}>\r\n            Describa sus inquietudes o pegue las notas de una consulta y nuestra IA generará un\r\n            resumen claro y sugerirá los próximos pasos a seguir. Esta herramienta es para fines\r\n            informativos y no reemplaza una consulta médica real.\r\n          </p>\r\n        </header>\r\n\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 360px\", gap: \"1.5rem\", marginTop: \"2.25rem\" }}>\r\n          <div className=\"surface rounded-xl shadow\" style={{ padding: \"1rem\" }}>\r\n            <h3 className=\"h3\" style={{ margin: 0, marginBottom: \".5rem\" }}>Ingrese sus Notas</h3>\r\n\r\n            <form onSubmit={handleGenerate} style={{ display: \"flex\", flexDirection: \"column\", gap: \".75rem\", marginTop: \".75rem\" }}>\r\n              <textarea\r\n                ref={textareaRef}\r\n                value={notes}\r\n                onChange={(e) => setNotes(e.target.value)}\r\n                placeholder=\"Describe aquí los síntomas, preguntas o información de la consulta...\"\r\n                style={{\r\n                  minHeight: 200,\r\n                  resize: \"vertical\",\r\n                  width: \"100%\",\r\n                  padding: \"1rem\",\r\n                  borderRadius: 8,\r\n                  background: \"transparent\",\r\n                  border: \"1px solid rgba(255,255,255,0.04)\",\r\n                  color: \"inherit\",\r\n                }}\r\n              />\r\n\r\n              {error && <div style={{ color: \"#ffb3b3\", fontWeight: 600 }}>{error}</div>}\r\n\r\n              {summary && (\r\n                <div style={{ background: \"rgba(255,255,255,0.02)\", padding: \".75rem\", borderRadius: 8, border: \"1px solid rgba(255,255,255,0.03)\" }}>\r\n                  <strong>Resumen generado:</strong>\r\n                  <p style={{ margin: \".5rem 0 0\", color: \"var(--blanco-perla)\", opacity: .9 }}>{summary}</p>\r\n                </div>\r\n              )}\r\n\r\n              <div style={{ display: \"flex\", gap: \".75rem\", alignItems: \"center\" }}>\r\n                <div className=\"hbg\" style={{ display: \"inline-flex\" }}>\r\n                  <button type=\"submit\" className=\"hbg__btn btn btn--primary\" style={{ minWidth: 220 }} disabled={loading}>\r\n                    {loading ? \"Generando…\" : \"✨ Generar Resumen\"}\r\n                  </button>\r\n                  <span className=\"hbg__halo\" aria-hidden=\"true\" />\r\n                </div>\r\n\r\n                <button type=\"button\" className=\"btn btn--ghost\" onClick={handleClear} title=\"Limpiar\">\r\n                  Limpiar\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n\r\n          <aside>\r\n            <div className=\"surface rounded-xl shadow\" style={{ padding: \"1rem\" }}>\r\n              <h3 className=\"h3\" style={{ margin: 0, marginBottom: \".5rem\" }}>Historial de Consultas</h3>\r\n              <div style={{ marginTop: \".75rem\", minHeight: 80 }}>\r\n                {history.length === 0 ? (\r\n                  <p className=\"muted\" style={{ margin: 0 }}>No hay consultas guardadas.</p>\r\n                ) : (\r\n                  <ul style={{ margin: 0, padding: 0, listStyle: \"none\", display: \"grid\", gap: \".6rem\" }}>\r\n                    {history.map((h) => (\r\n                      <li key={h.id} style={{ borderRadius: 8, padding: \".6rem\", background: \"transparent\", border: \"1px solid rgba(255,255,255,0.03)\" }}>\r\n                        <div style={{ fontWeight: 700 }}>{h.createdAt}</div>\r\n                        <div style={{ fontSize: \".95rem\", color: \"var(--blanco-perla)\", opacity: .88, marginTop: \".25rem\" }}>\r\n                          {h.summary ? (\r\n                            <><strong>Resumen:</strong> <div style={{marginTop:4}}>{h.summary}</div></>\r\n                          ) : (\r\n                            <div>{h.text.slice(0, 140)}{h.text.length>140 ? \"…\" : \"\"}</div>\r\n                          )}\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </aside>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":["ConsultationAI","notes","setNotes","useState","history","setHistory","loading","setLoading","summary","setSummary","error","setError","textareaRef","useRef","_jsx","className","style","paddingTop","paddingBottom","children","_jsxs","maxWidth","textAlign","marginBottom","fontSize","margin","display","gridTemplateColumns","gap","marginTop","padding","onSubmit","async","e","preventDefault","text","trim","res","fetch","method","headers","body","JSON","stringify","ok","errText","Error","data","json","aiSummary","result","entry","id","Date","now","createdAt","toLocaleString","s","err","console","flexDirection","ref","value","onChange","target","placeholder","minHeight","resize","width","borderRadius","background","border","color","fontWeight","opacity","alignItems","type","minWidth","disabled","onClick","current","focus","title","length","listStyle","map","h","_Fragment","slice"],"sourceRoot":""}