{"version":3,"file":"static/js/612.118b5fc8.chunk.js","mappings":"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","sources":["components/CheckoutForm.jsx","components/PaymentPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { PaymentElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\n\r\nexport default function CheckoutForm({ onSuccess }) {\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n\r\n    const [message, setMessage] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!stripe || !elements) {\n            return;\n        }\n\n        setIsLoading(true);\n\n        const paymentElement = elements.getElement(PaymentElement);\n        if (!paymentElement) {\n            setMessage(\"El formulario de pago no termino de cargar. Espera y reintenta.\");\n            setIsLoading(false);\n            return;\n        }\n\n        const { error: submitError } = await elements.submit();\n        if (submitError) {\n            setMessage(submitError.message);\n            setIsLoading(false);\n            return;\n        }\n\n        const { error, paymentIntent } = await stripe.confirmPayment({\n            elements,\n            confirmParams: {\n                return_url: window.location.origin + \"/contacto\", // Fallback\n            },\n            redirect: \"if_required\",\r\n        });\r\n\r\n        if (error) {\r\n            setMessage(error.message);\r\n        } else if (paymentIntent && paymentIntent.status === \"succeeded\") {\r\n            setMessage(\"Pago exitoso!\");\r\n            if (onSuccess) onSuccess(paymentIntent);\r\n        } else {\r\n            setMessage(\"Algo salió mal. Intente nuevamente.\");\r\n        }\r\n\r\n        setIsLoading(false);\r\n    };\r\n\r\n    const paymentElementOptions = {\r\n        layout: \"tabs\",\r\n    };\r\n\r\n    if (message === \"Pago exitoso!\") {\r\n        return (\r\n            <div className=\"w-full text-center py-8 animate-fade-in\">\r\n                <div className=\"mb-4 flex justify-center\">\r\n                    <div className=\"h-16 w-16 bg-green-500/10 rounded-full flex items-center justify-center\">\r\n                        <svg className=\"w-8 h-8 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n                <h3 className=\"text-xl font-bold text-white mb-2\">¡Pago Realizado!</h3>\r\n                <p className=\"text-gray-400\">Procesando su cita...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <form id=\"payment-form\" onSubmit={handleSubmit} className=\"w-full\">\r\n            <PaymentElement id=\"payment-element\" options={paymentElementOptions} />\r\n            <button\r\n                disabled={isLoading || !stripe || !elements}\r\n                id=\"submit\"\r\n                className=\"boton-formulario w-full mt-4\"\r\n                style={{ marginTop: '1.5rem' }}\r\n            >\r\n                <span id=\"button-text\">\r\n                    {isLoading ? \"Procesando...\" : \"Pagar $100 y Agendar\"}\r\n                </span>\r\n            </button>\r\n            {message && <div id=\"payment-message\" className=\"mt-4 text-center text-sm text-red-400\">{message}</div>}\r\n        </form>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\n\r\n// Make sure to call loadStripe outside of a component’s render to avoid\r\n// recreating the Stripe object on every render.\r\n// This is your test publishable API key.\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\nconst API_BASE_URL = (\n    process.env.REACT_APP_API_BASE_URL ||\n    \"https://doc-orlando.vercel.app\"\n).replace(/\\/$/, \"\");\n\nexport default function PaymentPage() {\n    const [clientSecret, setClientSecret] = useState(\"\");\n\n    useEffect(() => {\n        // Create PaymentIntent as soon as the page loads\n        fetch(`${API_BASE_URL}/api/create-payment-intent`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ items: [{ id: \"consultation\" }], amount: 2000 }), // Example amount: $20.00\n        })\n            .then((res) => res.json())\r\n            .then((data) => setClientSecret(data.clientSecret));\r\n    }, []);\r\n\r\n    const appearance = {\r\n        theme: 'stripe',\r\n    };\r\n    const options = {\r\n        clientSecret,\r\n        appearance,\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-md w-full space-y-8\">\r\n                <div>\r\n                    <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n                        Pay for your Consultation\r\n                    </h2>\r\n                </div>\r\n                {clientSecret && (\r\n                    <Elements options={options} stripe={stripePromise}>\r\n                        <CheckoutForm />\r\n                    </Elements>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["CheckoutForm","_ref","onSuccess","stripe","useStripe","elements","useElements","message","setMessage","useState","isLoading","setIsLoading","_jsxs","className","children","_jsx","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","id","onSubmit","async","e","preventDefault","getElement","PaymentElement","error","submitError","submit","paymentIntent","confirmPayment","confirmParams","return_url","window","location","origin","redirect","status","options","layout","disabled","style","marginTop","stripePromise","loadStripe","process","API_BASE_URL","replace","PaymentPage","clientSecret","setClientSecret","useEffect","fetch","concat","method","headers","body","JSON","stringify","items","amount","then","res","json","data","appearance","theme","Elements"],"sourceRoot":""}