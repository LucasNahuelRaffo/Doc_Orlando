"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[970],{9970:(e,r,a)=>{a.r(r),a.d(r,{default:()=>n});var t=a(5043),i=a(579);function n(){const[e,r]=(0,t.useState)(""),[a,n]=(0,t.useState)([{id:"welcome",role:"bot",text:"Hola. Soy su asistente virtual de IA. \xbfEn qu\xe9 puedo ayudarle hoy? Puede describirme sus inquietudes o lo que le gustar\xeda mejorar."}]),[o,s]=(0,t.useState)(!1),l=(0,t.useRef)(null),d=(0,t.useRef)(null);return(0,t.useEffect)(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[a,o]),(0,t.useEffect)(()=>{const e=d.current;if(!e||!("IntersectionObserver"in window))return;const r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-inview"),r.disconnect())})},{threshold:.1});return r.observe(e),()=>r.disconnect()},[]),(0,i.jsx)("section",{ref:d,className:"section ai-consult reveal-fade",style:{paddingTop:"8rem",paddingBottom:"4rem"},children:(0,i.jsxs)("div",{className:"container",style:{maxWidth:900},children:[(0,i.jsxs)("header",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,i.jsx)("h1",{className:"h2",style:{fontSize:"clamp(2rem, 4.5vw, 3.25rem)"},children:"Asistente Virtual IA"}),(0,i.jsx)("p",{className:"lead",style:{maxWidth:600,margin:"12px auto 0"},children:"Converse con nuestra IA para recibir orientaci\xf3n preliminar sobre procedimientos."})]}),(0,i.jsxs)("div",{className:"surface rounded-xl shadow",style:{height:"600px",display:"flex",flexDirection:"column",overflow:"hidden",border:"1px solid var(--divider)",background:"rgba(23, 31, 33, 0.6)",backdropFilter:"blur(10px)"},children:[(0,i.jsxs)("div",{ref:l,style:{flex:1,padding:"1.5rem",overflowY:"auto",display:"flex",flexDirection:"column",gap:"1rem"},children:[a.map(e=>{const r="user"===e.role;return(0,i.jsx)("div",{style:{alignSelf:r?"flex-end":"flex-start",maxWidth:"80%",padding:"1rem 1.25rem",borderRadius:"18px",borderBottomRightRadius:r?"4px":"18px",borderBottomLeftRadius:r?"18px":"4px",background:r?"var(--azul-cirugia)":"var(--surface-2)",color:r?"#fff":"var(--blanco-perla)",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontFamily:"var(--font-body)",fontSize:"1.05rem",lineHeight:1.6},children:e.text},e.id)}),o&&(0,i.jsx)("div",{style:{alignSelf:"flex-start",padding:"1rem 1.25rem",borderRadius:"18px",borderBottomLeftRadius:"4px",background:"var(--surface-2)",color:"var(--blanco-perla)",opacity:.7},children:"Escribiendo..."})]}),(0,i.jsxs)("form",{onSubmit:async function(a){a.preventDefault();const t=e.trim();if(!t)return;const i={id:Date.now(),role:"user",text:t};n(e=>[...e,i]),r(""),s(!0);try{const e=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});let r="";if(e.ok){const a=await e.json();r=a.reply||a.message||"Entendido."}else await new Promise(e=>setTimeout(e,1500)),r="Gracias por compartir esa informaci\xf3n. Basado en lo que me cuenta, podr\xedamos considerar una evaluaci\xf3n para determinar el mejor procedimiento. \xbfLe gustar\xeda agendar una cita con el Dr. Santill\xe1n?";n(e=>[...e,{id:Date.now()+1,role:"bot",text:r}])}catch(o){console.error(o),n(e=>[...e,{id:Date.now()+1,role:"bot",text:"Lo siento, hubo un error al procesar su mensaje. Por favor intente nuevamente."}])}finally{s(!1)}},style:{padding:"1rem",borderTop:"1px solid var(--divider)",background:"var(--surface-1)",display:"flex",gap:"0.75rem"},children:[(0,i.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"Escriba su mensaje...",style:{flex:1,padding:"0.85rem 1.25rem",borderRadius:"999px",border:"1px solid var(--divider)",background:"rgba(0,0,0,0.2)",color:"#fff",outline:"none",fontSize:"1rem"}}),(0,i.jsx)("button",{type:"submit",className:"btn btn--primary",disabled:o||!e.trim(),style:{borderRadius:"999px",padding:"0.85rem 1.5rem",minWidth:"auto"},children:"Enviar"})]})]})]})})}}}]);
//# sourceMappingURL=970.322f4159.chunk.js.map