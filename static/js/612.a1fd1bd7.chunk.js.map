{"version":3,"file":"static/js/612.a1fd1bd7.chunk.js","mappings":"2IAGe,SAASA,EAAYC,GAAiB,IAAhB,UAAEC,GAAWD,EAC9C,MAAME,GAASC,EAAAA,EAAAA,MACTC,GAAWC,EAAAA,EAAAA,OAEVC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,OAChCC,EAAWC,IAAgBF,EAAAA,EAAAA,WAAS,GAmC3C,MAAgB,kBAAZF,GAEIK,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0CAAyCC,SAAA,EACpDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACrCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0EAAyEC,UACpFC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAyBG,KAAK,OAAOC,OAAO,eAAeC,QAAQ,YAAWJ,UACzFC,EAAAA,EAAAA,KAAA,QAAMI,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,0BAIjFP,EAAAA,EAAAA,KAAA,MAAIF,UAAU,oCAAmCC,SAAC,yBAClDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAC,8BAMrCF,EAAAA,EAAAA,MAAA,QAAMW,GAAG,eAAeC,SAlDPC,UAGjB,GAFAC,EAAEC,kBAEGxB,IAAWE,EACZ,OAGJM,GAAa,GAEb,MAAM,MAAEiB,EAAK,cAAEC,SAAwB1B,EAAO2B,eAAe,CACzDzB,WACA0B,cAAe,CACXC,WAAYC,OAAOC,SAASC,OAAS,aAEzCC,SAAU,gBAGVR,EACApB,EAAWoB,EAAMrB,SACVsB,GAA0C,cAAzBA,EAAcQ,QACtC7B,EAAW,iBACPN,GAAWA,EAAU2B,IAEzBrB,EAAW,0CAGfG,GAAa,IAwBmCE,UAAU,SAAQC,SAAA,EAC9DC,EAAAA,EAAAA,KAACuB,EAAAA,GAAc,CAACf,GAAG,kBAAkBgB,QAtBf,CAC1BC,OAAQ,WAsBJzB,EAAAA,EAAAA,KAAA,UACI0B,SAAU/B,IAAcP,IAAWE,EACnCkB,GAAG,SACHV,UAAU,+BACV6B,MAAO,CAAEC,UAAW,UAAW7B,UAE/BC,EAAAA,EAAAA,KAAA,QAAMQ,GAAG,cAAaT,SACjBJ,EAAY,gBAAkB,2BAGtCH,IAAWQ,EAAAA,EAAAA,KAAA,OAAKQ,GAAG,kBAAkBV,UAAU,wCAAuCC,SAAEP,MAGrG,C,oGCnEA,MAAMqC,GAAgBC,EAAAA,EAAAA,GAAWC,+GAElB,SAASC,IACpB,MAAOC,EAAcC,IAAmBxC,EAAAA,EAAAA,UAAS,KAEjDyC,EAAAA,EAAAA,WAAU,KAENC,MAAM,6BAA8B,CAChCC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEC,MAAO,CAAC,CAAElC,GAAI,iBAAmBmC,OAAQ,QAE/DC,KAAMC,GAAQA,EAAIC,QAClBF,KAAMG,GAASb,EAAgBa,EAAKd,gBAC1C,IAEH,MAGMT,EAAU,CACZS,eACAe,WALe,CACfC,MAAO,WAOX,OACIjD,EAAAA,EAAAA,KAAA,OAAKF,UAAU,uFAAsFC,UACjGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,yDAAwDC,SAAC,gCAI1EkC,IACGjC,EAAAA,EAAAA,KAACkD,EAAAA,GAAQ,CAAC1B,QAASA,EAASpC,OAAQyC,EAAc9B,UAC9CC,EAAAA,EAAAA,KAACf,EAAAA,EAAY,UAMrC,C","sources":["components/CheckoutForm.jsx","components/PaymentPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { PaymentElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\n\r\nexport default function CheckoutForm({ onSuccess }) {\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n\r\n    const [message, setMessage] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!stripe || !elements) {\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n\r\n        const { error, paymentIntent } = await stripe.confirmPayment({\r\n            elements,\r\n            confirmParams: {\r\n                return_url: window.location.origin + \"/contacto\", // Fallback\r\n            },\r\n            redirect: \"if_required\",\r\n        });\r\n\r\n        if (error) {\r\n            setMessage(error.message);\r\n        } else if (paymentIntent && paymentIntent.status === \"succeeded\") {\r\n            setMessage(\"Pago exitoso!\");\r\n            if (onSuccess) onSuccess(paymentIntent);\r\n        } else {\r\n            setMessage(\"Algo salió mal. Intente nuevamente.\");\r\n        }\r\n\r\n        setIsLoading(false);\r\n    };\r\n\r\n    const paymentElementOptions = {\r\n        layout: \"tabs\",\r\n    };\r\n\r\n    if (message === \"Pago exitoso!\") {\r\n        return (\r\n            <div className=\"w-full text-center py-8 animate-fade-in\">\r\n                <div className=\"mb-4 flex justify-center\">\r\n                    <div className=\"h-16 w-16 bg-green-500/10 rounded-full flex items-center justify-center\">\r\n                        <svg className=\"w-8 h-8 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n                <h3 className=\"text-xl font-bold text-white mb-2\">¡Pago Realizado!</h3>\r\n                <p className=\"text-gray-400\">Procesando su cita...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <form id=\"payment-form\" onSubmit={handleSubmit} className=\"w-full\">\r\n            <PaymentElement id=\"payment-element\" options={paymentElementOptions} />\r\n            <button\r\n                disabled={isLoading || !stripe || !elements}\r\n                id=\"submit\"\r\n                className=\"boton-formulario w-full mt-4\"\r\n                style={{ marginTop: '1.5rem' }}\r\n            >\r\n                <span id=\"button-text\">\r\n                    {isLoading ? \"Procesando...\" : \"Pagar $100 y Agendar\"}\r\n                </span>\r\n            </button>\r\n            {message && <div id=\"payment-message\" className=\"mt-4 text-center text-sm text-red-400\">{message}</div>}\r\n        </form>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\n\r\n// Make sure to call loadStripe outside of a component’s render to avoid\r\n// recreating the Stripe object on every render.\r\n// This is your test publishable API key.\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\r\n\r\nexport default function PaymentPage() {\r\n    const [clientSecret, setClientSecret] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        // Create PaymentIntent as soon as the page loads\r\n        fetch(\"/api/create-payment-intent\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ items: [{ id: \"consultation\" }], amount: 2000 }), // Example amount: $20.00\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => setClientSecret(data.clientSecret));\r\n    }, []);\r\n\r\n    const appearance = {\r\n        theme: 'stripe',\r\n    };\r\n    const options = {\r\n        clientSecret,\r\n        appearance,\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-md w-full space-y-8\">\r\n                <div>\r\n                    <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n                        Pay for your Consultation\r\n                    </h2>\r\n                </div>\r\n                {clientSecret && (\r\n                    <Elements options={options} stripe={stripePromise}>\r\n                        <CheckoutForm />\r\n                    </Elements>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["CheckoutForm","_ref","onSuccess","stripe","useStripe","elements","useElements","message","setMessage","useState","isLoading","setIsLoading","_jsxs","className","children","_jsx","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","id","onSubmit","async","e","preventDefault","error","paymentIntent","confirmPayment","confirmParams","return_url","window","location","origin","redirect","status","PaymentElement","options","layout","disabled","style","marginTop","stripePromise","loadStripe","process","PaymentPage","clientSecret","setClientSecret","useEffect","fetch","method","headers","body","JSON","stringify","items","amount","then","res","json","data","appearance","theme","Elements"],"sourceRoot":""}