{"version":3,"file":"static/js/970.322f4159.chunk.js","mappings":"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","sources":["components/ConsultationAI.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\n\r\n/**\r\n * Consulta IA tipo Chat:\r\n * - Interfaz de chat (burbujas).\r\n * - Sin sidebar de historial.\r\n * - Tipografía ajustada.\r\n */\r\n\r\nexport default function ConsultationAI() {\r\n  const [input, setInput] = useState(\"\");\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      id: \"welcome\",\r\n      role: \"bot\",\r\n      text: \"Hola. Soy su asistente virtual de IA. ¿En qué puedo ayudarle hoy? Puede describirme sus inquietudes o lo que le gustaría mejorar.\",\r\n    },\r\n  ]);\r\n  const [loading, setLoading] = useState(false);\r\n  const scrollRef = useRef(null);\r\n  const rootRef = useRef(null);\r\n\r\n  // Auto-scroll al fondo\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n    }\r\n  }, [messages, loading]);\r\n\r\n  // Reveal on scroll (solo para el contenedor principal)\r\n  useEffect(() => {\r\n    const root = rootRef.current;\r\n    if (!root || !(\"IntersectionObserver\" in window)) return;\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((e) => {\r\n          if (e.isIntersecting) {\r\n            e.target.classList.add(\"is-inview\");\r\n            observer.disconnect();\r\n          }\r\n        });\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n    observer.observe(root);\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  async function handleSend(e) {\r\n    e.preventDefault();\r\n    const text = input.trim();\r\n    if (!text) return;\r\n\r\n    // 1. Agregar mensaje usuario\r\n    const userMsg = { id: Date.now(), role: \"user\", text };\r\n    setMessages((prev) => [...prev, userMsg]);\r\n    setInput(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      // 2. Llamada a API (simulada o real)\r\n      const res = await fetch(\"/api/ai/chat\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ message: text }),\r\n      });\r\n\r\n      let botText = \"\";\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        botText = data.reply || data.message || \"Entendido.\";\r\n      } else {\r\n        // Fallback si no hay backend real configurado aún\r\n        // Simulación de respuesta para demo\r\n        await new Promise((r) => setTimeout(r, 1500));\r\n        botText =\r\n          \"Gracias por compartir esa información. Basado en lo que me cuenta, podríamos considerar una evaluación para determinar el mejor procedimiento. ¿Le gustaría agendar una cita con el Dr. Santillán?\";\r\n      }\r\n\r\n      // 3. Agregar mensaje bot\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        { id: Date.now() + 1, role: \"bot\", text: botText },\r\n      ]);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          id: Date.now() + 1,\r\n          role: \"bot\",\r\n          text: \"Lo siento, hubo un error al procesar su mensaje. Por favor intente nuevamente.\",\r\n        },\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section\r\n      ref={rootRef}\r\n      className=\"section ai-consult reveal-fade\"\r\n      style={{ paddingTop: \"8rem\", paddingBottom: \"4rem\" }}\r\n    >\r\n      <div className=\"container\" style={{ maxWidth: 900 }}>\r\n        <header style={{ textAlign: \"center\", marginBottom: \"2rem\" }}>\r\n          <h1 className=\"h2\" style={{ fontSize: \"clamp(2rem, 4.5vw, 3.25rem)\" }}>\r\n            Asistente Virtual IA\r\n          </h1>\r\n          <p className=\"lead\" style={{ maxWidth: 600, margin: \"12px auto 0\" }}>\r\n            Converse con nuestra IA para recibir orientación preliminar sobre procedimientos.\r\n          </p>\r\n        </header>\r\n\r\n        {/* Chat Container */}\r\n        <div\r\n          className=\"surface rounded-xl shadow\"\r\n          style={{\r\n            height: \"600px\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            overflow: \"hidden\",\r\n            border: \"1px solid var(--divider)\",\r\n            background: \"rgba(23, 31, 33, 0.6)\", // Semi-transparent dark\r\n            backdropFilter: \"blur(10px)\",\r\n          }}\r\n        >\r\n          {/* Messages Area */}\r\n          <div\r\n            ref={scrollRef}\r\n            style={{\r\n              flex: 1,\r\n              padding: \"1.5rem\",\r\n              overflowY: \"auto\",\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              gap: \"1rem\",\r\n            }}\r\n          >\r\n            {messages.map((msg) => {\r\n              const isUser = msg.role === \"user\";\r\n              return (\r\n                <div\r\n                  key={msg.id}\r\n                  style={{\r\n                    alignSelf: isUser ? \"flex-end\" : \"flex-start\",\r\n                    maxWidth: \"80%\",\r\n                    padding: \"1rem 1.25rem\",\r\n                    borderRadius: \"18px\",\r\n                    borderBottomRightRadius: isUser ? \"4px\" : \"18px\",\r\n                    borderBottomLeftRadius: isUser ? \"18px\" : \"4px\",\r\n                    background: isUser\r\n                      ? \"var(--azul-cirugia)\"\r\n                      : \"var(--surface-2)\",\r\n                    color: isUser ? \"#fff\" : \"var(--blanco-perla)\",\r\n                    boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\",\r\n                    fontFamily: \"var(--font-body)\", // Typography change requested\r\n                    fontSize: \"1.05rem\",\r\n                    lineHeight: 1.6,\r\n                  }}\r\n                >\r\n                  {msg.text}\r\n                </div>\r\n              );\r\n            })}\r\n            {loading && (\r\n              <div\r\n                style={{\r\n                  alignSelf: \"flex-start\",\r\n                  padding: \"1rem 1.25rem\",\r\n                  borderRadius: \"18px\",\r\n                  borderBottomLeftRadius: \"4px\",\r\n                  background: \"var(--surface-2)\",\r\n                  color: \"var(--blanco-perla)\",\r\n                  opacity: 0.7,\r\n                }}\r\n              >\r\n                Escribiendo...\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Input Area */}\r\n          <form\r\n            onSubmit={handleSend}\r\n            style={{\r\n              padding: \"1rem\",\r\n              borderTop: \"1px solid var(--divider)\",\r\n              background: \"var(--surface-1)\",\r\n              display: \"flex\",\r\n              gap: \"0.75rem\",\r\n            }}\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              placeholder=\"Escriba su mensaje...\"\r\n              style={{\r\n                flex: 1,\r\n                padding: \"0.85rem 1.25rem\",\r\n                borderRadius: \"999px\",\r\n                border: \"1px solid var(--divider)\",\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"#fff\",\r\n                outline: \"none\",\r\n                fontSize: \"1rem\",\r\n              }}\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn--primary\"\r\n              disabled={loading || !input.trim()}\r\n              style={{\r\n                borderRadius: \"999px\",\r\n                padding: \"0.85rem 1.5rem\",\r\n                minWidth: \"auto\",\r\n              }}\r\n            >\r\n              Enviar\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":["ConsultationAI","input","setInput","useState","messages","setMessages","id","role","text","loading","setLoading","scrollRef","useRef","rootRef","useEffect","current","scrollTop","scrollHeight","root","window","observer","IntersectionObserver","entries","forEach","e","isIntersecting","target","classList","add","disconnect","threshold","observe","_jsx","ref","className","style","paddingTop","paddingBottom","children","_jsxs","maxWidth","textAlign","marginBottom","fontSize","margin","height","display","flexDirection","overflow","border","background","backdropFilter","flex","padding","overflowY","gap","map","msg","isUser","alignSelf","borderRadius","borderBottomRightRadius","borderBottomLeftRadius","color","boxShadow","fontFamily","lineHeight","opacity","onSubmit","async","preventDefault","trim","userMsg","Date","now","prev","res","fetch","method","headers","body","JSON","stringify","message","botText","ok","data","json","reply","Promise","r","setTimeout","err","console","error","borderTop","type","value","onChange","placeholder","outline","disabled","minWidth"],"sourceRoot":""}